<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left: 0.25em solid rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 1600px;
  	margin: 0 auto;
  	padding: 30px 60px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: none;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: none;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
    padding-right: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    pre {
        page-break-inside: avoid;
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.mac-os #write{
    caret-color: AccentColor;
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



</style><title>郑佳彤_企业实习中期检查报告</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
    
<div id='write'  class=''><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        
        body, .markdown-body,crossnote, .markdown-preview {
            max-width: 1920px; /* 设置最大宽度为1920px */
            margin: 0 auto; /* 使内容在页面中居中 */
        }
        html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{
          padding: 100px;
        }
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./0_Bluetti水印.png'); /* 替换为水印图片的路径 */
            background-repeat: no-repeat;
            background-position: center center; /* 水印居中 */
            background-attachment: fixed; /* 水印固定在页面背景 */
            background-size: 40%; /* 调整水印图片的大小 */
            opacity: 0.3; /* 设置水印透明度 */
            pointer-events: none; /* 确保水印不会影响页面的交互 */
            z-index: 0; /* 确保水印位于页面内容的下方 */
        }

        .sidebar {
            width: 340px;
            white-space: normal;  /* 避免内部元素不换行 */
            overflow-x: hidden;   /* 禁止横向滚动条 */
            position: fixed;
            left: 0;
            top: 0;
            padding: 20px;
            background-color: #f2fadd;
            height: 100%;
            overflow-y: auto;
            border-radius: 8px;
            border: 1px solid #30ac0b;  /* 为目录栏添加边框 */
            box-shadow: 2px 2px 8px rgba(0,0,0,0.05);
        }
        .sidebar li:hover,.sidebar li.active {
            background-color: rgba(184, 241, 76, 0.493);  /* 鼠标悬停时背景色变化 */
            border-radius: 6px;
            
            color: rgb(17, 13, 252);  /* 改变文字颜色 */
            border-left: 4px solid #2196f3;
        }
        .sidebar a {
            text-decoration: none;
            transition: background-color 0.2s ease;
        }


        .content {
            flex: 1;
            margin-left: 360px; /* Adjust this value based on the width of the sidebar */
            padding: 20px;
            margin-right: 20px; /* 增加右边距，使内容更靠右 */
            box-sizing: border-box; /* 确保内边距不会增加元素的总宽度 */
            
        }
        .thumbnail {
            width: 100%; /* Adjust the size of the thumbnail */
            cursor: pointer;
            margin: 10px;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .overlay img {
            max-width: 90%;
            max-height: 90%;
        }
        .thumbnail-container {
            display: flex;
            justify-content: space-between; /* Optional: Adjust spacing between images */
            flex-wrap: nowrap; /* Ensure images stay in one line */
        }
        p {
            width: 100%; /* 让段落宽度占满内容区域 */
            word-wrap: break-word; /* 确保长单词也能换行 */
        }
        .alert-box {
            background-color: #f0f0f0;
            border-left: 4px solid #999;
            padding: 12px 16px;
            margin: 16px 0;
            border-radius: 6px;
            font-size: 20px;
            color: #333;
            line-height: 1.6;
        }
    /* 设置列表项的行高，调整行距 */
    .sidebar li {
      line-height: 0.7; /* 这里的 1.5 是一个示例值，你可以根据需要调整，比如 1.2、1.8 等 */
      color: #010307;
    }
    .sidebar ul ul {
    padding-left: 20px; /* 控制二级列表缩进 */
    border-left: 2px solid rgba(0, 0, 0, 0.1);
    margin-top: 4px;
    
    }  

	</style>
</head>
<body>
    <div class="sidebar">
        <h2>目录</h2>
        <ul>
            <li><a href="#任务1:AIGC工具链建设">任务1:AIGC工具链建设</a>
            <ul>
                <li><a href="#完成情况">完成情况</a></li>
                <li><a href="#需求分析">需求分析</a></li>
                <li><a href="#设计与实现">设计与实现</a></li>
                <li><a href="#复杂问题与解决方案">复杂问题与解决方案</a></li>
                <li><a href="#知识技能学习情况">知识技能学习情况</a></li>
            </ul></li>
            <li><a href="#任务2:竞对新品分析系统">任务2:竞对新品分析系统</a>
            <ul>
                <li><a href="#完成情况-2">完成情况</a></li>
                <li><a href="#需求分析-2">需求分析</a></li>
                <li><a href="#设计与实现-2">设计与实现</a></li>
                <li><a href="#复杂问题与解决方案-2">复杂问题与解决方案</a></li>
                <li><a href="#知识技能学习情况-2">知识技能学习情况</a></li>
            </ul></li>
            <li><a href="#任务3:风力发电领域学术资源采集">任务3:风力发电学术资源采集</a>
            <ul>
                <li><a href="#完成情况-3">完成情况</a></li>
                <li><a href="#需求分析-3">需求分析</a></li>
                <li><a href="#设计与实现-3">设计与实现</a></li>
                <li><a href="#复杂问题与解决方案-3">复杂问题与解决方案</a></li>
                <li><a href="#知识技能学习情况-3">知识技能学习情况</a></li>
            </ul></li>
            <li><a href="#总结反思与后期任务计划">总结反思与后期任务计划</a>
            <ul>
                <li><a href="#阶段实习总结">阶段实习总结</a></li>
                <li><a href="#任务与目标进度">任务与目标进度</a></li>
            </ul></li>
        </ul>
    </div>
    <div class="content"><h1 id='企业实习中期检查报告202504---202505'><span>企业实习中期检查报告【2025.04—2025.05】</span></h1><p><span>by 郑佳彤</span></p><p><span>说明：本报告按照参与项目顺序成文，每个项目内包含</span><strong><span>完成情况、需求分析、设计与实现、复杂问题与解决方案、知识技能学习情况</span></strong><span>。</span></p><p><span>实习的主要任务集中在视觉AI设计与大语言模型的应用与优化上。结合企业对AI生成内容的需求，我参与了以下三个核心任务，并取得了一定的进展。</span></p><div class="thumbnail-container"style="display: flex; justify-content: center;">
    <div>
        <img src="./实习中期项目进度规划图.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay1')">
    </div>
</div>
<p style="text-align:center; font-size:14px; color:#717171;">图1-实习中期项目进度规划图
</p>
<div class="overlay" id="overlay1" onclick="hideOverlay('overlay1')">
    <img src="./实习中期项目进度规划图.png" alt="Image">
</div>
<!-- ----------------------------------------------------------------------- --><h2 id='任务1:AIGC工具链建设'><span>任务1:AIGC工具链建设</span></h2><h3 id='完成情况'><span>完成情况</span></h3><h4 id='midjourney教程与图文梳理'><span>Midjourney教程与图文梳理</span></h4><p><span>完成了Midjourney的功能教程部署，包括如何使用</span><code>--s</code><span>（风格化强度）、</span><code>--chaos</code><span>（随机性）、</span><code>--no</code><span>（排除项）等命令来控制图像生成的不同特性。</span></p><div class="thumbnail-container">
    <video style="margin-right: 20px;" width="30%" controls>
        <source src="./【MJ】33--iw调整图生图时的图像权重.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <video style="margin-right: 20px;" width="30%" controls>
        <source src="./【MJ】34--s控制风格化程度.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <video width="30%" controls>
        <source src="./【MJ】35--no反向提示不包含的元素.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>
<div class="thumbnail-container"style="display: flex; justify-content: center;">
    <div>
        <img src="./1_Midjourney教程部署.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay2')">
    </div>
</div>
<div class="overlay" id="overlay2" onclick="hideOverlay('overlay2')">
    <img src="./1_Midjourney教程部署.png" alt="Image">
</div><p style="text-align:center; font-size:14px; color:#717171;">图2-midjourney教程部署
</p><p>&nbsp;</p><p><span>通过视频和图文教程，梳理了这些命令的实际应用场景和使用方法，教程内容为公司提供了系统的操作指南，确保员工能够快速掌握Midjourney的基本功能。 </span></p><p><strong><span>Prompt与视频教程：</span></strong><a href='https://agi-design.poweroak.ltd/'><span>Bluetti|智绘库</span></a></p><p><strong><span>图文教程【内部文档】：</span></strong><span></span><a href='https://alidocs.dingtalk.com/i/nodes/qnYMoO1rWx51ka1wFkeKyNMBV47Z3je9?utm_scene=team_space'><span>Midjourney图文补充教程</span></a></p><h4 id='stable-diffusion工作流搭建与优化'><span>Stable Diffusion工作流搭建与优化</span></h4><p><span>搭建并优化了Stable Diffusion的ComfyUI工作流，通过对工作流中的各个节点进行参数调节，实现了图像质量的优化。在优化过程中，特别关注风格化控制、细节呈现和图像生成速度，确保工作流能够在多个设计场景下稳定且高效地输出图像。</span></p><div class="thumbnail-container"style="display: flex; justify-content: center;">
    <div>
        <img src="./1_Stable Diffusion的ComfyUI工作流示例.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay3')">
    </div>
</div>
<div class="overlay" id="overlay3" onclick="hideOverlay('overlay3')">
    <img src="./1_Stable Diffusion的ComfyUI工作流示例.png" alt="Image">
</div><p style="text-align:center; font-size:14px; color:#717171;">图3-Stable Diffusion的ComfyUI工作流示例
</p>
<h4 id='企业校招ai宣传视频'><span>企业校招AI宣传视频</span></h4><p><span>使用AI生成视频工具（可灵、Vidu等）制作创意性校招宣传图频。</span></p>
<div class="thumbnail-container">
    <video style="margin-right: 20px;" width="40%" controls>
        <source src="./长安大学B.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <video  width="40%" controls>
        <source src="./桂林电子科技大学B.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>
<p>&nbsp;</p><h3 id='需求分析'><span>需求分析</span></h3><h4 id='功能需求'><span>功能需求</span></h4><h5 id='midjourney-教程与图文梳理'><span>Midjourney 教程与图文梳理</span></h5><ul><li><p><span>编制覆盖Midjourney核心控制参数的教程，包含 </span><code>--s</code><span>（风格化强度）、</span><code>--chaos</code><span>（随机性）、</span><code>--no</code><span>（排除项）等命令使用方法；</span></p></li><li><p><span>教程包括图文说明与视频讲解两种形式，部署至内部知识平台，支持员工自助学习；</span></p></li><li><p><span>各参数均配有生成图像的案例解释，结合不同设计任务明确使用场景；</span></p></li><li><p><span>教程内容结构化，便于后期迭代维护与更新。</span></p></li></ul><h5 id='stable-diffusion-comfyui工作流搭建与优化'><span>Stable Diffusion ComfyUI工作流搭建与优化</span></h5><ul><li><p><span>通过ComfyUI框架搭建基础工作流，包括：提示词输入、CLIP文本编码器、K采样器、VAE图像解码器等组件；</span></p></li><li><p><span>支持风格切换与分辨率调整，适配不同图像生成任务（概念图、产品图、场景图）；</span></p></li><li><p><span>插件参数优化包括Prompt文本强度控制、分辨率约束、曲线控制、图像混合方式、背景处理，确保图像生成的稳定性、风格一致性与整体画面质量。</span></p></li><li><p><span>输出图像具备高稳定性与一致性，适配多部门使用需求。</span></p></li></ul><h4 id='性能需求'><span>性能需求</span></h4><ul><li><p><strong><span>图像生成速度：</span></strong><span>高分辨率图像生成时，通过节点并行处理与GPU内存调度，减少图像的生成延迟；</span></p></li><li><p><strong><span>系统稳定性：</span></strong><span>多插件工作流下，控制内存使用率，避免因超负载导致的崩溃；</span></p></li><li><p><strong><span>图像一致性与质量：</span></strong><span>降低微调后图像在内容还原、细节精度和风格控制方面的风格偏移率。</span></p></li></ul><h4 id='其他需求'><span>其他需求</span></h4><ul><li><p><span>定期给部门成员分享AIGC工具更新情况；</span></p></li><li><p><span>为设计部及其它部门需要AIGC工具的同事提供相关学习资料和案例培训。</span></p></li></ul><p>&nbsp;</p><h3 id='设计与实现'><span>设计与实现</span></h3><h4 id='总体设计'><span>总体设计</span></h4><p><span>本项目工具链总体结构分为三层：</span></p><ol start='' ><li><p><strong><span>教学交互层</span></strong><span>：部署Midjourney图文教程和培训视频；</span></p></li><li><p><strong><span>图像生成层</span></strong><span>：搭建基于 Stable Diffusion ComfyUI的稳定图像生成工作流；</span></p></li><li><p><strong><span>参数管理与优化层</span></strong><span>：配置提示词模板与风格调优参数，控制图像一致性和输出质量。</span></p></li></ol><div class="thumbnail-container"style="display: flex; justify-content: center;">
    <div>
        <img src="./1_AIGC工具链系统架构图.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay4')">
    </div>
</div>
<div class="overlay" id="overlay4" onclick="hideOverlay('overlay4')">
    <img src="./1_AIGC工具链系统架构图.png" alt="Image">
</div><p style="text-align:center; font-size:14px; color:#717171;">图4-AIGC工具链系统架构图
</p><h4 id='详细设计'><span>详细设计</span></h4><h5 id='子系统-a教程知识平台'><strong><span>子系统 A：教程知识平台</span></strong></h5><ul><li><p><span>教程内容围绕 Midjourney 核心参数展开，共两个模块：</span></p><ul><li><p><strong><span>命令参数</span></strong><span>模块：重点讲解 </span><code>--s</code><span>、</span><code>--chaos</code><span>、</span><code>--no</code><span> 等控制生成行为的命令；</span></p></li><li><p><strong><span>风格控制</span></strong><span>模块：结合应用场景展示提示词与参数对生成风格的具体影响。</span></p></li></ul></li><li><p><span>教程输出形式包括：</span></p><ul><li><p><span>图文教程（共享文档部署于公司钉盘）；</span></p></li><li><p><span>视频教程（嵌入公司平台，涵盖实操与案例演示）。</span></p></li></ul></li><li><p><span>教程平台支持版本维护、内容迭代。</span></p></li></ul><h5 id='子系统-bstable-diffusion-图像生成系统'><strong><span>子系统 B：Stable Diffusion 图像生成系统</span></strong></h5><ul><li><p><span>保证ComfyUI基础工作流生成逻辑；</span></p></li></ul><div class="thumbnail-container" style="display: flex; justify-content: center;">
    <div>
        <img src="./1_ComfyUI工作流基本逻辑.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay5')">
    </div>
</div>
<div class="overlay" id="overlay5" onclick="hideOverlay('overlay5')">
    <img src="./1_ComfyUI工作流基本逻辑.png" alt="Image">
</div><p style="text-align:center; font-size:14px; color:#717171;">图5-ComfyUI工作流基本逻辑
</p><ul><li><p><span>插件模块化管理，支持扩展节点如图像混合、超分辨放大等；</span></p></li><li><p><span>参数集中在配置面板，可根据任务切换分辨率、风格类型等。</span></p></li></ul><h5 id='子系统-c参数模板与风格调优模块'><strong><span>子系统 C：参数模板与风格调优模块</span></strong></h5><ul><li><p><span>预设多种场景Prompt模板，如“工业产品渲染”、“科技感人像”、“风景背景”；</span></p></li><li><p><span>参数调优模板包括采样方法（euler、dpm++）、采样步数、宽高比等；</span></p></li><li><p><span>插件细节调节涵盖：图像对比度、背景模糊、提示词分权重设置。</span></p></li></ul><p>&nbsp;</p><h3 id='复杂问题与解决方案'><span>复杂问题与解决方案</span></h3><div class="alert-box">
  📌 <strong>问题1：</strong><br>
  工作流节点间依赖复杂，图像输出不确定性强
  <span style="color: #d00;">【解决中】</span>
</div><ul><li><h4 id='问题分析'><span>问题分析</span></h4><p><span>ComfyUI 是一个基于节点的图像生成工具，虽然高度灵活，但也带来了以下问题：</span></p><ul><li><p><span>节点依赖顺序强：Prompt → 编码器 → 采样器 → 解码器，如稍有错误顺序或参数失配即可能失败；</span></p></li><li><p><span>插件组合不确定：例如多种风格叠加可能产生“风格漂移”；</span></p></li><li><p><span>参数过度自由：导致不同用户出图风格不一致，难以复现。</span></p></li></ul></li><li><h4 id='解决方案'><span>解决方案</span></h4><ol start='' ><li><p><strong><span>建立标准化工作流模板库</span></strong></p></li></ol><ul><li><p><span>提取高频使用场景（如产品图、人物概念图）中的稳定流程；</span></p></li><li><p><span>每类流程封装为 </span><code>.json</code><span> 工作流模板供调用；</span></p></li><li><p><span>模板中预置关键插件组合、输入字段约束与默认参数范围。</span></p></li></ul><ol start='2' ><li><p><strong><span>引入节点合法性校验机制</span></strong></p></li></ol><p><span>编写工作流校验脚本，检测是否存在：</span></p><ul><li><p><span>节点遗漏（如无 UNet 输出）；</span></p></li><li><p><span>插件组合冲突（如超分模块与图像融合模块逻辑冲突）；</span></p></li><li><p><span>Prompt 权重过高/过低导致模型崩溃。</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 节点合法性校验示例函数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">validate_workflow</span>(<span class="cm-variable">workflow</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">errors</span> <span class="cm-operator">=</span> []</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># 校验工作流节点顺序是否正确</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-string">"Prompt"</span> <span class="cm-keyword">not</span> <span class="cm-keyword">in</span> <span class="cm-variable">workflow</span>[<span class="cm-string">"plugins"</span>]:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-string">"CLIP"</span> <span class="cm-keyword">not</span> <span class="cm-keyword">in</span> <span class="cm-variable">workflow</span>[<span class="cm-string">"plugins"</span>]:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-string">"VAE"</span> <span class="cm-keyword">not</span> <span class="cm-keyword">in</span> <span class="cm-variable">workflow</span>[<span class="cm-string">"plugins"</span>]:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">errors</span>.<span class="cm-property">append</span>(<span class="cm-string">"缺少 'VAE' 节点"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># 检查插件组合是否冲突</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-string">"SuperResolution"</span> <span class="cm-keyword">in</span> <span class="cm-variable">workflow</span>[<span class="cm-string">"plugins"</span>] <span class="cm-keyword">and</span> <span class="cm-string">"ImageFusion"</span> <span class="cm-keyword">in</span> <span class="cm-variable">workflow</span>[<span class="cm-string">"plugins"</span>]:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># 返回校验结果</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-builtin">len</span>(<span class="cm-variable">errors</span>) <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">False</span>, <span class="cm-variable">errors</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">True</span>, <span class="cm-string">"工作流有效"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 645px;"></div><div class="CodeMirror-gutters" style="display: none; height: 645px;"></div></div></div></pre><ul><li><p><span>检查是否有必需的节点（如 </span><code>Prompt</code><span>、</span><code>CLIP</code><span>、</span><code>UNet</code><span>、</span><code>VAE</code><span>）；</span></p></li><li><p><span>检查插件组合是否存在冲突（例如超分与图像融合的组合问题）；</span></p></li><li><p><span>校验 </span><code>prompt_weight</code><span>（提示词权重）是否在合理范围内。</span></p></li></ul></li></ul></li><li><h4 id='可行性研究'><span>可行性研究</span></h4></li></ul><figure class='table-figure'><table><thead><tr><th><span>讨论维度</span></th><th><span>内容说明</span></th></tr></thead><tbody><tr><td><strong><span>安全性</span></strong></td><td><span>模板机制避免参数误操作导致服务奔溃；合法性校验可防止恶意Prompt注入。</span></td></tr><tr><td><strong><span>环境约束</span></strong></td><td><span>方案本地部署为主，硬件资源开销小于重新训练模型。</span></td></tr><tr><td><strong><span>法律合规</span></strong></td><td><span>不涉及数据抓取或内容违法风险。</span></td></tr><tr><td><strong><span>经济性</span></strong></td><td><span>一次性开发成本低（模板配置 + 校验脚本）；显著提高出图质量稳定性与复现性，节约运营人力成本。</span></td></tr></tbody></table></figure><p><span>该方案通过技术与规则结合，实现了流程稳定化与结果可控性，大幅提升图像生成一致性与安全性，是合理且经济可行的优化路径。</span></p><p>&nbsp;</p><div class="alert-box">
  📌 <strong>问题2：</strong><br>
  高分辨率图像输出存在性能瓶颈与资源管理问题
  <span style="color: #d00;">【待解决】</span></div><ul><li><h4 id='问题分析-2'><span>问题分析</span></h4><p><span>高分辨率生成（如1024×1024及以上）通常带来以下挑战：</span></p><ul><li><p><span>显存占用激增，导致 ComfyUI 直接崩溃；</span></p></li><li><p><span>插件串行执行效率低，尤其在图生图、超分流程中。</span></p></li></ul></li><li><h4 id='解决方案-2'><span>解决方案</span></h4><ol start='' ><li><p><strong><span>引入 Lazy Evaluation（延迟执行）+ 分批运行策略</span></strong></p></li></ol><ul><li><p><span>将所有高分节点（如超分插件、背景合成）移至流程尾部；</span></p></li><li><p><span>开启 ComfyUI 的 GPU usage 动态探测，运行前检查显存占用状态，超过阈值则排队延迟处理。</span></p></li></ul><ol start='2' ><li><p><strong><span>使用显存优化插件和分块渲染插件（如 TileSampler）</span></strong></p></li></ol><ul><li><p><span>高分图像拆分为多个小图块（tile），逐块处理再拼接；</span></p></li><li><p><span>显著降低单次占用显存，可在中端显卡上生成大图。</span></p></li></ul></li><li><h4 id='可行性研究-2'><span>可行性研究</span></h4><figure class='table-figure'><table><thead><tr><th><span>维度</span></th><th><span>内容说明</span></th></tr></thead><tbody><tr><td><strong><span>安全性</span></strong></td><td><span>有效防止内存溢出、驱动崩溃，保障图像生成系统稳定运行。</span></td></tr><tr><td><strong><span>环境约束</span></strong></td><td><span>显卡资源使用得到充分管理，避免系统闲置或瞬间爆发负载。</span></td></tr><tr><td><strong><span>法律合规</span></strong></td><td><span>所有插件使用均为开源合法，无违规访问或资源争用行为。</span></td></tr><tr><td><strong><span>经济性</span></strong></td><td><span>无需更换硬件，仅通过算法与流程优化实现高分输出支持；提升产图质量的同时显著节省硬件投资。</span></td></tr></tbody></table></figure></li></ul><p><span>该方案在保证图像质量的同时，有效解决了生成性能瓶颈问题，兼顾了系统稳定性与资源经济性，符合长期可持续部署目标。</span></p><p>&nbsp;</p><h3 id='知识技能学习情况'><span>知识技能学习情况</span></h3><ul><li><p><span>深入学习了Midjourney和Stable Diffusion的高级功能，如风格化强度（</span><code>--s</code><span>）、随机性控制（</span><code>--chaos</code><span>）等技巧，根据不同需求调整生成图像的风格和细节。</span></p></li><li><p><span>在Stable Diffusion中，优化了ComfyUI工作流，调整了多个插件参数，提升了图像生成效果并确保生成符合设计要求。</span></p></li></ul><script>
    function showOverlay(id) {
        document.getElementById(id).style.display = 'flex';
    }
    function hideOverlay(id) {
    document.getElementById(id).style.display = 'none';
}
</script><!-- ----------------------------------------------------------------------- --><h2 id='任务2:竞对新品分析系统'><span>任务2:竞对新品分析系统</span></h2><h3 id='完成情况-2'><span>完成情况</span></h3><p><span>在此任务中，构建基于Scrapy的分布式爬虫系统，实现Anker新品数据全维度采集，并将这些数据通过大语言模型生成详细的产品报告。目标是通过自动化的方式，帮助公司分析市场竞争态势，并为管理层提供及时的产品信息。</span></p><ul><li><p><strong><span>爬虫框架搭建：</span></strong><span> 使用Scrapy成功爬取竞争对手的产品数据，包括产品名称、价格、品牌、技术亮点、技术规格等信息；</span></p></li><li><p><strong><span>数据库集成：</span></strong><span> 正在对收集到的产品数据进行更有效的存储和管理，通过SQLAlchemy将数据保存在SQLite数据库中；</span></p></li><li><p><strong><span>HTML报告生成：</span></strong><span> 通过调用SiliconFlow API，将收集到的产品数据生成标准化的HTML报告。</span></p><div class="thumbnail-container"style="display: flex; justify-content: center;"><div><img src="./2_产品HTML报告示例.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay6')"></div>
</div><p style="text-align:center; font-size:14px; color:#717171;">图6-产品HTML报告示例
</p>
<div class="overlay" id="overlay6" onclick="hideOverlay('overlay6')">
    <img src="./2_产品HTML报告示例.png" alt="Image">
</div></li><li><p><strong><span>API优化：</span></strong><span> 优化API调用的效率，减少生成报告的时间，确保模型能够快速响应并生成所需报告。</span></p></li></ul><p>&nbsp;</p><h3 id='需求分析-2'><span>需求分析</span></h3><h4 id='功能需求-2'><span>功能需求</span></h4><div class="thumbnail-container"style="display: flex; justify-content: center;">
    <div>
        <img src="./2_系统流程总览图.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay7')">
    </div>
</div>
<div class="overlay" id="overlay7" onclick="hideOverlay('overlay7')">
    <img src="./2_系统流程总览图.png" alt="Image">
</div><p style="text-align:center; font-size:14px; color:#717171;">图7-系统流程总览图
</p><p><span>系统流程总览如图，可细分为以下功能环节。</span></p><h5 id='分布式产品爬虫系统'><span>分布式产品爬虫系统</span></h5><ul><li><p><span>基于Scrapy构建分布式爬虫框架，支持按品牌、系列、发布时间分类抓取；</span></p></li><li><p><span>可提取字段包括：产品名称、价格、品牌、发布日期、SKU、产品链接、技术亮点、技术参数、图片URL等；</span></p></li><li><p><span>支持URL自动去重、分页递归爬取与错误重试机制。</span></p></li></ul><h5 id='数据存储与管理'><span>数据存储与管理</span></h5><ul><li><p><span>使用SQLAlchemy将结构化数据写入SQLite数据库；</span></p></li><li><p><span>每次更新记录创建时间，支持后期数据对比与追踪；</span></p></li><li><p><span>提供统一接口供报告生成系统调用数据。</span></p></li></ul><h5 id='报告生成系统'><span>报告生成系统</span></h5><ul><li><p><span>调用SiliconFlow API，将产品数据提交给图文大语言模型；</span></p></li><li><p><span>基于Prompt模板生成HTML结构的产品分析报告，包含头图、价格、亮点、参数、链接等信息；</span></p></li><li><p><span>报告自动命名与分类，支持文件落地存储及日志追踪。</span></p></li></ul><h4 id='性能需求-2'><span>性能需求</span></h4><ul><li><p><span>支持产品页面的并发爬取，单次全量爬取控制在5分钟以内；</span></p></li><li><p><span>API异常处理逻辑支持重试+fallback保障内容生成；</span></p></li><li><p><span>数据需要全部成功写入。</span></p></li></ul><h4 id='其他需求-2'><span>其他需求</span></h4><ul><li><p><span>所有抓取需符合目标网站robots协议与合规性规范；</span></p></li><li><p><span>系统日志应记录爬虫异常、API响应状态、报告保存路径等信息。</span></p><p>&nbsp;</p></li></ul><h3 id='设计与实现-2'><span>设计与实现</span></h3><h4 id='总体设计-2'><span>总体设计</span></h4><p><span>本系统总体结构分为三个模块：</span></p><ol start='' ><li><p><strong><span>数据采集模块（Scrapy）</span></strong></p></li><li><p><strong><span>数据存储模块（SQLAlchemy）</span></strong></p></li><li><p><strong><span>报告生成模块（API调用+模板渲染）</span></strong></p></li></ol><div class="thumbnail-container" style="display: flex; justify-content: center;">
    <div>
        <img src="./2_竞对产品分析系统架构图.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay8')">
    </div>
</div>
<div class="overlay" id="overlay8" onclick="hideOverlay('overlay8')">
    <img src="./2_竞对产品分析系统架构图.png" alt="Image">
</div><p style="text-align:center; font-size:14px; color:#717171;">图8-竞对产品分析系统架构图
</p><h4 id='详细设计-2'><span>详细设计</span></h4><h5 id='子系统-ascrapy爬虫系统'><span>子系统 A：Scrapy爬虫系统</span></h5><ul><li><p><span>识别产品页面：通过在产品页面中查找带有 </span><code>NEW</code><span> 标签的产品，从而实现新产品的精准采集；</span></p></li><li><p><span>精准定位 DOM 元素：利用 XPath 和 CSS 选择器准确地提取产品的关键信息，如名称、价格、品牌、技术规格等；</span></p></li><li><p><span>去重策略：采用 SKU 作为唯一标识进行数据去重，确保每个产品仅采集一次；</span></p></li><li><p><span>防崩溃策略：针对爬虫可能出现的超时、连接错误等情况，设计多轮重试和错误处理机制，确保爬取任务的稳定性。</span></p><p><strong><span>关键步骤：</span></strong></p><p><span>1.</span><strong><span>解析产品列表页面</span></strong><span> (</span><code>parse</code><span> 方法，仅保留关键代码)</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">parse</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">response</span>):</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">products_section</span> <span class="cm-operator">=</span> <span class="cm-variable">response</span>.<span class="cm-property">css</span>(<span class="cm-string">'section#productsList'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">product_links</span> <span class="cm-operator">=</span> <span class="cm-variable">products_section</span>.<span class="cm-property">css</span>(<span class="cm-string">'.BannerLink_link__0xr37::attr(href)'</span>).<span class="cm-property">getall</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">logger</span>.<span class="cm-property">info</span>(<span class="cm-string">f"在页面上找到了 </span>{<span class="cm-builtin">len</span>(<span class="cm-variable">product_links</span>)}<span class="cm-string"> 个产品链接: </span>{<span class="cm-variable">response</span>.<span class="cm-property">url</span>}<span class="cm-string">"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># 处理每个产品链接</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> <span class="cm-variable">link</span> <span class="cm-keyword">in</span> <span class="cm-variable">product_links</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">full_url</span> <span class="cm-operator">=</span> <span class="cm-string">f"https://www.anker.com</span>{<span class="cm-variable">link</span>}<span class="cm-string">"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">yield</span> <span class="cm-variable">scrapy</span>.<span class="cm-property">Request</span>(<span class="cm-variable">url</span><span class="cm-operator">=</span><span class="cm-variable">full_url</span>, <span class="cm-variable">callback</span><span class="cm-operator">=</span><span class="cm-variable-2">self</span>.<span class="cm-property">parse_product</span>, <span class="cm-variable">meta</span><span class="cm-operator">=</span>{<span class="cm-string">'product_link'</span>: <span class="cm-variable">full_url</span>})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 323px;"></div><div class="CodeMirror-gutters" style="display: none; height: 323px;"></div></div></div></pre><ul><li><p><strong><span>解析页面</span></strong><span>：使用 Scrapy 的 </span><code>response.css()</code><span> 提取产品列表；</span></p></li><li><p><strong><span>提取产品链接</span></strong><span>：根据 CSS 选择器获取所有产品的链接；</span></p></li><li><p><strong><span>请求产品详情</span></strong><span>：对于每个提取到的链接，爬虫会发起新的请求，调用解析产品详情 </span><code>parse_product</code><span> 方法处理每个产品的详情。</span></p></li></ul><p><span>2.</span><strong><span>解析产品详情页面</span></strong><span> (</span><code>parse_product</code><span> 方法，仅保留关键代码)</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">parse_product</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">response</span>):</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">item</span>[<span class="cm-string">'product_link'</span>] <span class="cm-operator">=</span> <span class="cm-variable">response</span>.<span class="cm-property">meta</span>.<span class="cm-property">get</span>(<span class="cm-string">'product_link'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># 提取产品名称</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">product_name</span> <span class="cm-operator">=</span> <span class="cm-variable">response</span>.<span class="cm-property">xpath</span>(<span class="cm-string">'//h1/text()'</span>).<span class="cm-property">get</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">product_name</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">item</span>[<span class="cm-string">'product_name'</span>] <span class="cm-operator">=</span> <span class="cm-variable">product_name</span>.<span class="cm-property">strip</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># 提取JSON数据</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">try</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">scripts</span> <span class="cm-operator">=</span> <span class="cm-variable">response</span>.<span class="cm-property">css</span>(<span class="cm-string">'script::text'</span>).<span class="cm-property">getall</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">target_script</span> <span class="cm-operator">=</span> <span class="cm-variable">json</span>.<span class="cm-property">loads</span>(<span class="cm-variable">scripts</span>[<span class="cm-operator">-</span><span class="cm-number">1</span>]).<span class="cm-property">get</span>(<span class="cm-string">'props'</span>, {}).<span class="cm-property">get</span>(<span class="cm-string">'pageProps'</span>, {})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">prod_data</span> <span class="cm-operator">=</span> <span class="cm-variable">target_script</span>.<span class="cm-property">get</span>(<span class="cm-string">'product'</span>, {})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">shop_data</span> <span class="cm-operator">=</span> <span class="cm-variable">target_script</span>.<span class="cm-property">get</span>(<span class="cm-string">'shop'</span>, {})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">base_info</span> <span class="cm-operator">=</span> <span class="cm-variable-2">self</span>.<span class="cm-property">parse_base_info</span>(<span class="cm-variable">prod_data</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">base_info</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">item</span>[<span class="cm-string">'publish_time'</span>] <span class="cm-operator">=</span> <span class="cm-variable">base_info</span>.<span class="cm-property">get</span>(<span class="cm-string">'publish_time'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">item</span>[<span class="cm-string">'expand_info'</span>] <span class="cm-operator">=</span> {<span class="cm-string">'overview'</span>: <span class="cm-variable-2">self</span>.<span class="cm-property">parse_overview</span>(<span class="cm-variable">response</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">'download'</span>: <span class="cm-variable-2">self</span>.<span class="cm-property">parse_download</span>(<span class="cm-variable">response</span>)}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> <span class="cm-variable">prod</span> <span class="cm-keyword">in</span> <span class="cm-variable">base_info</span>[<span class="cm-string">'prods'</span>]:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">item</span>[<span class="cm-string">'sku'</span>] <span class="cm-operator">=</span> <span class="cm-variable">prod</span>.<span class="cm-property">get</span>(<span class="cm-string">'sku'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">item</span>[<span class="cm-string">'expand_base_info'</span>][<span class="cm-string">'discount'</span>] <span class="cm-operator">=</span> <span class="cm-variable">prod</span>.<span class="cm-property">get</span>(<span class="cm-string">'discount'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">item</span> <span class="cm-operator">=</span> <span class="cm-variable-2">self</span>.<span class="cm-property">gen_empty_item</span>(<span class="cm-variable">item</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">yield</span> <span class="cm-variable">item</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">item</span> <span class="cm-operator">=</span> <span class="cm-variable-2">self</span>.<span class="cm-property">gen_empty_item</span>(<span class="cm-variable">item</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">yield</span> <span class="cm-variable">item</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 761px;"></div><div class="CodeMirror-gutters" style="display: none; height: 761px;"></div></div></div></pre><ul><li><p><strong><span>提取产品名称</span></strong><span>：通过 XPath 提取 </span><code>&lt;h1&gt;</code><span> 标签中的文本作为产品名称；</span></p></li><li><p><strong><span>解析产品数据</span></strong><span>：从页面中的 JavaScript 脚本获取包含产品数据的 JSON，并解析出 </span><code>publish_time</code><span>、</span><code>brand</code><span> 等字段；</span></p></li><li><p><strong><span>提取技术亮点、概述、规格</span></strong><span>：使用不同的解析方法分别提取产品的技术</span><code>product_highlights</code><span>、</span><code>tech_specs</code><span>、</span><code>expand_info</code><span>等信息；</span></p></li><li><p><strong><span>处理产品变体</span></strong><span>：如果产品有多个变体（如不同的颜色、尺寸等），会将这些信息一起存储。</span></p></li></ul></li></ul><h5 id='子系统-b数据库管理'><span>子系统 B：数据库管理</span></h5><ul><li><p><strong><span>数据库设计</span></strong><span>如下，通过 </span><code>Product</code><span> 表存储产品的基本信息和技术规格，</span><code>Category</code><span> 表用于管理产品类别，两者通过多对多关系实现产品与类别的关联，确保数据的结构化存储与高效检索：</span></p><div class="thumbnail-container"style="display: flex; justify-content: center;"><div><img src="./2_Product表字段关系图.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay9')"></div></div><div class="overlay" id="overlay9" onclick="hideOverlay('overlay9')"><img src="./2_Product表字段关系图.png" alt="Image"></div><p style="text-align:center; font-size:14px; color:#717171;">图9-Product表字段关系图
    </p></li><li><p><span>SQLAlchemy 数据模型封装：使用 SQLAlchemy 对数据库进行封装，简化与数据库的交互，确保数据存储的一致性和可维护性；</span></p></li><li><p><span>查询、去重、排序与更新操作：支持高效的数据查询、去重、排序和更新功能，确保用户和系统能够高效检索和操作存储数据；</span></p></li><li><p><span>数据持久化存储：将抓取的数据以结构化形式存储于 SQLite 数据库中，同时支持 JSON 格式的存储，以便后续处理和导出。</span></p><p><code>db.py</code><strong><span>关键步骤</span></strong><span> ：</span></p><p><span>1.</span><strong><span>数据库路径与目录创建</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">DB_PATH</span> <span class="cm-operator">=</span> <span class="cm-variable">os</span>.<span class="cm-property">path</span>.<span class="cm-property">join</span>(<span class="cm-variable">os</span>.<span class="cm-property">path</span>.<span class="cm-property">dirname</span>(<span class="cm-variable">__file__</span>), <span class="cm-string">'../db/anker_new.db'</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">DB_DIR</span> <span class="cm-operator">=</span> <span class="cm-variable">os</span>.<span class="cm-property">path</span>.<span class="cm-property">dirname</span>(<span class="cm-variable">DB_PATH</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><ul><li><p><span>设置数据库文件的路径 (</span><code>anker_new.db</code><span>)。</span></p></li></ul><p><span>2.</span><strong><span>SQLAlchemy 引擎和会话管理</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">engine</span> <span class="cm-operator">=</span> <span class="cm-variable">create_engine</span>(<span class="cm-string">f'sqlite:///</span>{<span class="cm-variable">DB_PATH</span>}<span class="cm-string">'</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Base</span> <span class="cm-operator">=</span> <span class="cm-variable">declarative_base</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Session</span> <span class="cm-operator">=</span> <span class="cm-variable">sessionmaker</span>(<span class="cm-variable">bind</span><span class="cm-operator">=</span><span class="cm-variable">engine</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><ul><li><p><span>使用 SQLAlchemy 创建数据库引擎，连接到指定路径的 SQLite 数据库；</span></p></li><li><p><code>Base</code><span> 是 SQLAlchemy 的基础类，用来创建数据库表模型；</span><code>Session</code><span> 是与数据库交互的会话对象，所有的数据库操作都通过会话进行。</span></p></li></ul><p><span>3.</span><strong><span>定义数据库表模型</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">Product</span>(<span class="cm-variable">Base</span>):</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">__tablename__</span> <span class="cm-operator">=</span> <span class="cm-string">'products'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">id</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">Integer</span>, <span class="cm-variable">primary_key</span><span class="cm-operator">=</span><span class="cm-keyword">True</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">sku</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">String</span>(<span class="cm-number">50</span>), <span class="cm-variable">unique</span><span class="cm-operator">=</span><span class="cm-keyword">True</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">product_name</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">String</span>(<span class="cm-number">100</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">publish_time</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">String</span>(<span class="cm-number">20</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">product_link</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">String</span>(<span class="cm-number">200</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">price</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">String</span>(<span class="cm-number">20</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">brand</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">String</span>(<span class="cm-number">20</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">images</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">Text</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">expand_base_info</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">Text</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">product_highlights</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">Text</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">tech_specs</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">Text</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">expand_info</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">Text</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">created_at</span> <span class="cm-operator">=</span> <span class="cm-variable">Column</span>(<span class="cm-variable">String</span>(<span class="cm-number">20</span>), <span class="cm-variable">default</span><span class="cm-operator">=</span><span class="cm-variable">datetime</span>.<span class="cm-property">now</span>().<span class="cm-property">strftime</span>(<span class="cm-string">"%Y-%m-%d %H:%M:%S"</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 392px;"></div><div class="CodeMirror-gutters" style="display: none; height: 392px;"></div></div></div></pre><ul><li><p><span>定义了 </span><code>Product</code><span> 表模型，包含了多个字段如 </span><code>sku</code><span>、</span><code>product_name</code><span>、</span><code>price</code><span> 等，其中 </span><code>sku</code><span> 是唯一的主键字段；</span></p></li><li><p><span>该表用于存储产品数据，记录包括产品的基本信息、技术规格、产品亮点等。</span></p></li></ul><p><span>4.</span><strong><span>获取所有产品数据</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 获取所有产品数据的函数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">get_all_products</span>():</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">session</span> <span class="cm-operator">=</span> <span class="cm-variable">get_session</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">try</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">products</span> <span class="cm-operator">=</span> <span class="cm-variable">session</span>.<span class="cm-property">query</span>(<span class="cm-variable">Product</span>).<span class="cm-property">all</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">products</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">except</span> <span class="cm-variable">Exception</span> <span class="cm-keyword">as</span> <span class="cm-variable">e</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">logger</span>.<span class="cm-property">error</span>(<span class="cm-string">f"Error querying products: </span>{<span class="cm-builtin">str</span>(<span class="cm-variable">e</span>)}<span class="cm-string">"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> []</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">finally</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">session</span>.<span class="cm-property">close</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 254px;"></div><div class="CodeMirror-gutters" style="display: none; height: 254px;"></div></div></div></pre><ul><li><p><code>get_all_products()</code><span> 从 </span><code>Product</code><span> 表中查询所有产品的数据，并返回查询结果；</span></p></li><li><p><span>使用 SQLAlchemy 的 ORM 查询方式，查询 </span><code>Product</code><span> 表中的所有记录。</span></p></li></ul></li></ul><h5 id='子系统-chtml报告生成'><span>子系统 C：HTML报告生成</span></h5><ul><li><p><span>API封装模块：封装调用 Qwen-VL 和 DeepSeek-V3 图文大语言模型的 API 接口，确保数据能够被快速处理并生成报告；</span></p></li><li><p><span>模板化HTML结构：根据产品数据设计生成结构化的 HTML 报告，报告中包括头图、产品价格、亮点、参数、品牌信息、产品链接等。</span></p><div class="thumbnail-container"style="display: flex; justify-content: center;">
    <div><img src="./2_产品报告HTML结构图.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay10')"></div></div><div class="overlay" id="overlay10" onclick="hideOverlay('overlay10')"><img src="./2_产品报告HTML结构图.png" alt="Image"></div><p style="text-align:center; font-size:14px; color:#717171;">  图10-产品报告HTML结构图
</p></li><li><p><strong><span>关键步骤：</span></strong></p><p><span>1.</span><strong><span>报告生成核心过程：调用模型API</span></strong><span>（支持图文→文本回退）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">generate_with_model</span>(<span class="cm-variable">prompt_text</span>, <span class="cm-variable">image_url</span><span class="cm-operator">=</span><span class="cm-keyword">None</span>):</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">…</span> <span class="cm-comment">#重复请求和错误处理逻辑</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">image_url</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">messages</span> <span class="cm-operator">=</span> <span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">messages</span> <span class="cm-operator">=</span> <span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">result</span> <span class="cm-operator">=</span> <span class="cm-variable">send_request</span>(<span class="cm-variable">llm_config</span>, <span class="cm-variable">messages</span>, <span class="cm-string">"图文模型"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">result</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">result</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">logger</span>.<span class="cm-property">info</span>(<span class="cm-string">"🔁 使用纯文本模型 fallback..."</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">send_request</span>(<span class="cm-variable">fallback_llm_config</span>, [{<span class="cm-string">"role"</span>: <span class="cm-string">"user"</span>, <span class="cm-string">"content"</span>: <span class="cm-variable">prompt_text</span>}], <span class="cm-string">"文本模型"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 346px;"></div><div class="CodeMirror-gutters" style="display: none; height: 346px;"></div></div></div></pre><ul><li><p><code>generate_with_model</code><span>：负责生成报告的核心函数，首先尝试调用</span><strong><span>图文模型</span></strong><span>（</span><code>llm_config</code><span>），如果失败，则自动切换到</span><strong><span>纯文本模型</span></strong><span>（</span><code>fallback_llm_config</code><span>）进行回退；</span></p></li><li><p><span>通过设置 </span><code>messages</code><span>，请求的内容包括生成报告所需的文本和图像信息。</span></p></li></ul><p><span>2.</span><strong><span>生成报告的模板</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">prompt_template</span> <span class="cm-operator">=</span> <span class="cm-string">'''</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">请生成专业的产品报告HTML页面，结构参考以下规范：</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">&lt;div class="product-report"&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">  &lt;div class="header"&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string"> &nbsp;  …</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">  &lt;/div&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">  &lt;div class="info-block"&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string"> &nbsp;  …</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">  &lt;/div&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">  &lt;div class="highlights"&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string"> &nbsp;  …</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">  &lt;/div&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">&lt;/div&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">&lt;style&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">  …/* CSS样式省略，为HTML提供样式 */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">&lt;/style&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">当前产品数据：</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">[RAW_DATA]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">'''</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 484px;"></div><div class="CodeMirror-gutters" style="display: none; height: 484px;"></div></div></div></pre><ul><li><p><code>prompt_template</code><span> 是用来生成 HTML 格式报告的模板，里面包含了产品的各种信息（如产品名称、价格、技术规格、亮点等）；</span></p></li><li><p><code>[RAW_DATA]</code><span> 是占位符，后续会用实际的产品数据填充。</span></p></li></ul><p><span>3.</span><strong><span>主流程：读取产品→生成报告→保存HTML</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 主流程处理所有产品</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">products</span> <span class="cm-operator">=</span> <span class="cm-variable">get_all_products</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">product</span> <span class="cm-keyword">in</span> <span class="cm-variable">products</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">…</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">#提取图像链接和技术亮点</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">raw_data</span> <span class="cm-operator">=</span> { <span class="cm-variable">…</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">prompt</span> <span class="cm-operator">=</span> <span class="cm-variable">prompt_template</span>.<span class="cm-property">replace</span>(<span class="cm-string">"[RAW_DATA]"</span>, <span class="cm-variable">json</span>.<span class="cm-property">dumps</span>(<span class="cm-variable">raw_data</span>, <span class="cm-variable">ensure_ascii</span><span class="cm-operator">=</span><span class="cm-keyword">False</span>, <span class="cm-variable">indent</span><span class="cm-operator">=</span><span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">html</span> <span class="cm-operator">=</span> <span class="cm-variable">generate_with_model</span>(<span class="cm-variable">prompt</span>, <span class="cm-variable">image_url</span><span class="cm-operator">=</span><span class="cm-variable">first_image_url</span>) &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">with</span> <span class="cm-builtin">open</span>(<span class="cm-variable">path</span>, <span class="cm-string">"w"</span>, <span class="cm-variable">encoding</span><span class="cm-operator">=</span><span class="cm-string">"utf-8"</span>) <span class="cm-keyword">as</span> <span class="cm-variable">f</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">f</span>.<span class="cm-property">write</span>(<span class="cm-variable">html</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 300px;"></div><div class="CodeMirror-gutters" style="display: none; height: 300px;"></div></div></div></pre><ul><li><p><span>获取数据库中的所有产品信息，并循环处理每个产品；</span></p></li><li><p><span>对于每个产品，提取其图像链接和技术亮点，然后用模板填充数据；</span></p></li><li><p><span>调用 </span><code>generate_with_model</code><span> 生成报告，如果成功，则将 HTML 保存到指定路径。</span></p></li></ul><p>&nbsp;</p></li></ul><h3 id='复杂问题与解决方案-2'><span>复杂问题与解决方案</span></h3><div class="alert-box">
  📌 <strong>问题：</strong><br>
  报告生成模块需支持图文大模型与纯文本大模型自动切换（fallback）
  <span style="color: #d00;">【已解决】</span>
</div><ul><li><h4 id='问题分析-3'><span>问题分析</span></h4><p><span>报告生成过程中：</span></p><ul><li><p><strong><span>图文大模型（如 Qwen-VL 或类似的图文生成模型）</span></strong><span>能够根据输入的产品数据生成带有图像和文本的完整报告；</span></p></li><li><p><strong><span>纯文本大模型</span></strong><span>在图像生成失败时提供文本报告，但需要保证切换的流畅性和准确性；</span></p></li><li><p><span>需要在模型失败时有</span><strong><span>自动回退机制</span></strong><span>，以保证生成的报告始终能够按时交付。</span></p><div class="thumbnail-container"style="display: flex; justify-content: center;"><div><img src="./2_报告生成与回退逻辑图.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay11')"></div></div><div class="overlay" id="overlay11" onclick="hideOverlay('overlay11')"><img src="./2_报告生成与回退逻辑图.png" alt="Image">
</div><p style="text-align:center; font-size:14px; color:#717171;">图11-报告生成与回退逻辑图
</p></li></ul></li><li><h4 id='解决方案-3'><span>解决方案</span></h4><ol start='' ><li><p><strong><span>双模型回退机制（fallback）设计</span></strong></p><p><span>配置图文模型与文本模型的API：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 图文优先模型</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">llm_config</span> <span class="cm-operator">=</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">'sc_key'</span>: <span class="cm-string">"your_api_key"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">'base_url'</span>: <span class="cm-string">"https://api.siliconflow.cn/v1"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">'model'</span>: <span class="cm-string">"Qwen/Qwen2.5-VL-32B-Instruct"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">'temperature'</span>: <span class="cm-number">0.1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">'max_tokens'</span>: <span class="cm-number">8000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># fallback 纯文本模型</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fallback_llm_config</span> <span class="cm-operator">=</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">'model'</span>: <span class="cm-string">"deepseek-ai/DeepSeek-V3"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 346px;"></div><div class="CodeMirror-gutters" style="display: none; height: 346px;"></div></div></div></pre><ul><li><p><strong><span>第一层</span></strong><span>：</span><code>llm_config</code><span> 配置了一个</span><strong><span>图文优先的模型</span></strong><span>（</span><code>Qwen/Qwen2.5-VL-32B-Instruct</code><span>），用于生成包含图片和文本的报告，当输入数据足够清晰时，优先调用；</span></p></li><li><p><strong><span>第二层</span></strong><span>：</span><code>fallback_llm_config</code><span>配置了一个</span><strong><span>纯文本的模型</span></strong><span>（</span><code>deepseek-ai/DeepSeek-V3</code><span>），当图文模型失败时回退至此模型，生成仅包含文本的报告。</span></p></li></ul></li><li><p><strong><span>错误重试机制</span></strong></p></li></ol><ul><li><p><span>图文模型请求最大重试 3 次，每次失败后等待 </span><code>3, 6, 10</code><span> 秒后再重试，若 3 次失败后切换到文本模型生成报告；</span></p></li><li><p><span>超时控制：通过 </span><code>timeout=180</code><span> 控制最大等待时长，防止请求长时间挂起。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">send_request</span>(<span class="cm-variable">config</span>, <span class="cm-variable">messages</span>, <span class="cm-variable">label</span>):</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> <span class="cm-variable">retry</span> <span class="cm-keyword">in</span> <span class="cm-builtin">range</span>(<span class="cm-number">3</span>):<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#图文模型请求最大重试 3 次</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">try</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">response</span> <span class="cm-operator">=</span> <span class="cm-variable">requests</span>.<span class="cm-property">post</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">url</span><span class="cm-operator">=</span><span class="cm-string">f"</span>{<span class="cm-variable">config</span>[<span class="cm-string">'base_url'</span>]}<span class="cm-string">/chat/completions"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">headers</span><span class="cm-operator">=</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"Authorization"</span>: <span class="cm-string">f"Bearer </span>{<span class="cm-variable">config</span>[<span class="cm-string">'sc_key'</span>]}<span class="cm-string">"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"Content-Type"</span>: <span class="cm-string">"application/json"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">json</span><span class="cm-operator">=</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"model"</span>: <span class="cm-variable">config</span>[<span class="cm-string">"model"</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"temperature"</span>: <span class="cm-variable">config</span>[<span class="cm-string">"temperature"</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"max_tokens"</span>: <span class="cm-variable">config</span>[<span class="cm-string">"max_tokens"</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"messages"</span>: <span class="cm-variable">messages</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">timeout</span><span class="cm-operator">=</span><span class="cm-number">180</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">response</span>.<span class="cm-property">status_code</span> <span class="cm-operator">==</span> <span class="cm-number">200</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">response</span>.<span class="cm-property">json</span>()[<span class="cm-string">'choices'</span>][<span class="cm-number">0</span>][<span class="cm-string">'message'</span>][<span class="cm-string">'content'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">logger</span>.<span class="cm-property">warning</span>(<span class="cm-string">f"失败 (</span>{<span class="cm-variable">response</span>.<span class="cm-property">status_code</span>}<span class="cm-string">)：</span>{<span class="cm-variable">response</span>.<span class="cm-property">text</span>}<span class="cm-string">"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">except</span> <span class="cm-variable">Exception</span> <span class="cm-keyword">as</span> <span class="cm-variable">e</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">logger</span>.<span class="cm-property">warning</span>(<span class="cm-string">f"异常：</span>{<span class="cm-builtin">str</span>(<span class="cm-variable">e</span>)}<span class="cm-string">"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">time</span>.<span class="cm-property">sleep</span>([<span class="cm-number">3</span>, <span class="cm-number">6</span>, <span class="cm-number">10</span>][<span class="cm-variable">retry</span>])  <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#每次失败后等待3, 6, 10秒后再重试</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">None</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 576px;"></div><div class="CodeMirror-gutters" style="display: none; height: 576px;"></div></div></div></pre></li></ul></li><li><h4 id='可行性研究-3'><span>可行性研究</span></h4></li></ul><figure class='table-figure'><table><thead><tr><th><span>讨论维度</span></th><th><span>内容说明</span></th></tr></thead><tbody><tr><td><strong><span>安全性</span></strong></td><td><span>图文模型与纯文本模型的切换采用标准化API接口，减少安全漏洞；所有API交互通过加密传输，保障数据安全。</span></td></tr><tr><td><strong><span>环境约束</span></strong></td><td><span>该方案要求大语言模型（如 Qwen-VL、DeepSeek-V3）支持容错和回退机制，适应不同硬件和环境条件。</span></td></tr><tr><td><strong><span>法律合规性</span></strong></td><td><span>使用合法的第三方模型API，确保图文报告中不涉及版权问题；文本报告可以避免潜在的内容合规风险。</span></td></tr><tr><td><strong><span>经济性</span></strong></td><td><span>通过回退机制，减少图文生成失败后的业务损失；成本上增加一定的API调用费用，但通过回退减少错误的影响，整体上具有较高的性价比。</span></td></tr></tbody></table></figure><p><strong><span>结论</span></strong><span>：此解决方案通过</span><strong><span>双模型回退机制</span></strong><span>和</span><strong><span>错误重试机制</span></strong><span>，确保即使在图文模型不可用的情况下能够平滑过渡到纯文本模型，保证报告的生成和输出，大大提高了系统的鲁棒性和稳定性，同时具有较强的适应性和经济性。</span></p><p>&nbsp;</p><h3 id='知识技能学习情况-2'><span>知识技能学习情况</span></h3><h4 id='scrapy框架'><span>Scrapy框架</span></h4><ul><li><p><span>学会搭建Scrapy爬虫，熟悉了爬虫框架的基本原理和核心组件；</span></p></li><li><p><span>能配置爬虫的起始URL、请求头和代理等技术；</span></p></li><li><p><span>会使用XPath和CSS选择器提取网页中指定元素，如商品名称、价格、品牌等信息，实现了信息的高效提取。</span></p></li></ul><h4 id='sqlalchemy'><span>SQLAlchemy</span></h4><ul><li><p><span>掌握ORM（对象关系映射）技术，理解了数据库操作；</span></p></li><li><p><span>能进行数据库连接、数据表设计、数据存储和查询操作，提高了数据管理和操作的效率；</span></p></li><li><p><span>实现将爬取的产品信息存入数据库，并通过SQLAlchemy进行查询，确保了数据的一致性和可靠性。</span></p></li></ul><h4 id='siliconflow-api'><span>SiliconFlow API</span></h4><ul><li><p><span>掌握了调用SiliconFlow API的方法，将产品数据输入到大语言模型中，生成详细的HTML报告；</span></p></li><li><p><span>熟悉API配置与调用，能够根据需求调节模型的行为和输出结果，并通过处理API返回的JSON数据生成报告；</span></p></li><li><p><span>优化了API调用流程，确保了报告生成的高效性和准确性。</span></p></li></ul><script>
    function showOverlay(id) {
        document.getElementById(id).style.display = 'flex';
    }
    function hideOverlay(id) {
    document.getElementById(id).style.display = 'none';
}
</script>  <!-- ----------------------------------------------------------------------- --><h2 id='任务3:风力发电领域学术资源采集'><span>任务3:风力发电领域学术资源采集</span></h2><h3 id='完成情况-3'><span>完成情况</span></h3><p><span>由于公司在风力发电项目中的研发涉及到风力发电叶片翼型设计，该任务的目标是收集全国高校中该研究领域的教师信息，以便为公司与外部学术界的合作铺路。</span></p><p><strong><span>已完成：</span></strong></p><ul><li><p><strong><span>数据收集：</span></strong><span> 使用爬虫从全国985高校及粤境内高校的教师名录中提取风力发电领域的相关教师信息，并筛选出符合公司需求的具体目标；</span></p></li><li><p><strong><span>信息整理：</span></strong><span> 记录了包括教师姓名、联系方式、研究领域和所属学院等详细信息，并将其整理成表格，以便后续的联系和合作。</span></p><p><strong><span>输出文档【内部文档】：</span></strong><span> </span><a href='https://alidocs.dingtalk.com/i/nodes/amweZ92PV6XabMaAUrj3gAGG8xEKBD6p?corpId=dingfae9467eec27af36ee0f45d8e4f7c288&amp;utm_medium=im_card&amp;iframeQuery=utm_medium%3Dim_card%26utm_source%3Dim&amp;utm_scene=person_space&amp;utm_source=im'><span>风力发电领域教师</span></a></p></li></ul><p><strong><span>正在进行：</span></strong></p><ul><li><p><strong><span>联络准备：</span></strong><span> 团队正在通过电子邮件和电话等方式，尝试与这些教师建立联系，进一步推动合作项目的开展。</span></p></li></ul><h3 id='需求分析-3'><span>需求分析</span></h3><h4 id='功能需求-3'><span>功能需求</span></h4><h5 id='高校教师信息抓取'><span>高校教师信息抓取</span></h5><ul><li><p><span>使用Scrapy从全国985高校及粤境内高校的教师名录页面中爬取目标教师资料；</span></p></li><li><p><span>定位关键词包括“风力发电”、“翼型设计”、“流体仿真”、“风电气动”等；</span></p></li><li><p><span>提取字段：姓名、联系方式（邮箱/电话）、学校、院系、研究方向、来源链接等。</span></p></li></ul><h5 id='数据整理与筛选'><span>数据整理与筛选</span></h5><ul><li><p><span>将教师信息汇总为结构化表格，便于分类统计与后续使用；</span></p></li><li><p><span>对无效信息进行过滤（如非相关方向、研究方向模糊等）；</span></p></li><li><p><span>分类标签包括高校、省份、是否为教授/副教授、是否在研究所任职等。</span></p></li></ul><h4 id='性能需求-3'><span>性能需求</span></h4><ul><li><p><span>每次任务可自动导出为CSV格式表格，并保存至本地并备份至云端；</span></p></li><li><p><span>所有字段提取格式规范，输出文件具备良好的可读性与后续处理能力。</span></p></li></ul><h4 id='其他需求-3'><span>其他需求</span></h4><ul><li><p><span>后续将教师数据作为合作意向联系池，故需数据准确率高、来源可靠。</span></p></li></ul><p>&nbsp;</p><h3 id='设计与实现-3'><span>设计与实现</span></h3><h4 id='总体设计-3'><span>总体设计</span></h4><p><span>系统结构分为三层：</span></p><ol start='' ><li><p><strong><span>爬虫采集层</span></strong><span>：抓取网页HTML结构，解析目标字段；</span></p></li><li><p><strong><span>文本处理层</span></strong><span>：匹配关键词并提取关键信息；</span></p></li><li><p><strong><span>数据存储与输出层</span></strong><span>：生成CSV或JSON文件供运营使用。</span></p><div class="thumbnail-container"style="display: flex; justify-content: center;">
<div><img src="./3_风力发电学术资源采集系统架构图.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay12')"></div></div><div class="overlay" id="overlay12" onclick="hideOverlay('overlay12')"><img src="./3_风力发电学术资源采集系统架构图.png" alt="Image"></div><p style="text-align:center; font-size:14px; color:#717171;">图12-风力发电学术资源采集系统架构图
</p></li></ol><h4 id='详细设计-3'><span>详细设计</span></h4><h5 id='子系统-a爬虫采集层'><span>子系统 A：爬虫采集层</span></h5><ul><li><p><strong><span>输入数据</span></strong><span>：来自全国 985 高校与广东省重点高校的教师名录页 URL 列表。</span></p></li><li><p><strong><span>页面解析</span></strong><span>：</span></p><ul><li><p><span>使用 Scrapy 框架对页面进行请求与响应处理；</span></p></li><li><p><span>使用 XPath / CSS 选择器提取 </span><code>&lt;p&gt;</code><span>、</span><code>&lt;div&gt;</code><span> 等 HTML 文本段落内容。</span></p></li></ul></li><li><p><strong><span>关键词匹配</span></strong><span>：</span></p><p><span>基于预定义关键词库对段落内容进行初筛：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">["风力发电", "翼型设计", "风电气动", "流体仿真" ]</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre></li><li><p><strong><span>数据输出结构</span></strong><span>：</span></p><ul><li><p><span>若匹配关键词，记录为目标条目，提取字段包括：姓名、单位、院系、联系方式、研究方向、来源链接；</span></p></li><li><p><span>若未命中关键词，则该页面跳过，不输出数据。</span></p><div class="thumbnail-container"style="display: flex; justify-content: center;"><div>
<img src="./3_关键词匹配逻辑图.png" alt="Image" class="thumbnail" onclick="showOverlay('overlay13')"></div></div><div class="overlay" id="overlay13" onclick="hideOverlay('overlay13')"><img src="./3_关键词匹配逻辑图.png" alt="Image"></div><p style="text-align:center; font-size:14px; color:#717171;">图13-关键词匹配逻辑图</p></li></ul><p><strong><span>关键代码：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">parse_profile</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">response</span>):<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">#关键词匹配</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># 提取段落</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">paragraphs</span> <span class="cm-operator">=</span> <span class="cm-variable">response</span>.<span class="cm-property">css</span>(<span class="cm-string">"div.con_bload p"</span>).<span class="cm-property">xpath</span>(<span class="cm-string">"string(.)"</span>).<span class="cm-property">getall</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># 匹配关键词段落</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">item</span>[<span class="cm-string">"matched_paragraphs"</span>] <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">p</span>.<span class="cm-property">strip</span>() <span class="cm-keyword">for</span> <span class="cm-variable">p</span> <span class="cm-keyword">in</span> <span class="cm-variable">paragraphs</span> <span class="cm-keyword">if</span> <span class="cm-builtin">any</span>(<span class="cm-variable">kw</span> <span class="cm-keyword">in</span> <span class="cm-variable">p</span> <span class="cm-keyword">for</span> <span class="cm-variable">kw</span> <span class="cm-keyword">in</span> [<span class="cm-string">"风"</span>, <span class="cm-string">"叶"</span>, <span class="cm-string">"翼"</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># 若命中关键词，则输出该条目</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">item</span>[<span class="cm-string">"matched_paragraphs"</span>]:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">yield</span> <span class="cm-variable">item</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 277px;"></div><div class="CodeMirror-gutters" style="display: none; height: 277px;"></div></div></div></pre></li></ul><h5 id='子系统-b数据处理与筛选模块'><span>子系统 B：数据处理与筛选模块</span></h5><ul><li><p><strong><span>字段清洗</span></strong><span>：</span></p><ul><li><p><span>邮箱/电话字段使用正则提取；</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">extract_email</span>(<span class="cm-variable">text</span>: <span class="cm-builtin">str</span>) <span class="cm-operator">-&gt;</span> <span class="cm-builtin">str</span>:</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">matches</span> <span class="cm-operator">=</span> <span class="cm-variable">re</span>.<span class="cm-property">findall</span>(<span class="cm-string">r"[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+"</span>, <span class="cm-variable">text</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">matches</span>[<span class="cm-number">0</span>] <span class="cm-keyword">if</span> <span class="cm-variable">matches</span> <span class="cm-keyword">else</span> <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">extract_phone</span>(<span class="cm-variable">text</span>: <span class="cm-builtin">str</span>) <span class="cm-operator">-&gt;</span> <span class="cm-builtin">str</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">matches</span> <span class="cm-operator">=</span> <span class="cm-variable">re</span>.<span class="cm-property">findall</span>(<span class="cm-string">r"\d{3,4}[-\s]?\d{7,8}|\d{11}"</span>, <span class="cm-variable">text</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">matches</span>[<span class="cm-number">0</span>] <span class="cm-keyword">if</span> <span class="cm-variable">matches</span> <span class="cm-keyword">else</span> <span class="cm-string">""</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre></li><li><p><span>内容中若无“研究方向”或关键词段，则排除；</span></p></li><li><p><span>文本内容中若不含目标关键词（风电类），则跳过该教师。</span></p></li></ul></li><li><p><strong><span>人工复核</span></strong><span>：</span></p><ul><li><p><code>is_professor</code><span>: 是否为教授/副教授；</span></p></li><li><p><span>风力相关具体内容等。</span></p></li></ul></li></ul><h5 id='子系统-c数据输出模块'><span>子系统 C：数据输出模块</span></h5><ul><li><p><strong><span>结构化导出</span></strong><span>：字段统一为姓名、学校、院系、研究方向、联系方式、来源链接、是否已审核；</span></p></li><li><p><strong><span>多格式支持</span></strong><span>：</span></p><ul><li><p><span>输出为 </span><code>.csv</code><span> 文件，保存至本地 </span><code>./outputs/teachers_2025_05.csv</code><span>；</span></p></li><li><p><span>支持 </span><code>.json</code><span> 格式备份。</span></p></li></ul></li></ul><h3 id='复杂问题与解决方案-3'><span>复杂问题与解决方案</span></h3>
<div class="alert-box">
  📌 <strong>问题1：</strong><br>
  高校官网结构多样，教师信息分布不统一，需动态解析 DOM 层级，提取统一字段
  <span style="color: #d00;">【待解决】</span>
</div><ul><li><h4 id='问题分析-4'><span>问题分析</span></h4><p><span>高校官网存在显著的页面结构差异，包括但不限于：</span></p><ul><li><p><span>信息布局不一致（有的集中在学校教师名录页，有的嵌套在二级学院页）；</span></p></li><li><p><span>DOM 层级不一致：不同网站的产品信息可能放置在不同的标签、嵌套结构中；</span></p></li><li><p><span>字段命名和内容位置不可预期（如“联系方式”可能为“邮箱”、“E-mail”、“联系老师”等）。</span></p></li></ul></li><li><h4 id='解决方案-4'><span>解决方案</span></h4><p><span>1.</span><strong><span>模板化字段抽取器设计</span></strong></p><ul><li><p><span>构建统一的字段提取模板：将每种高校结构映射为模板字典项，如：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="json"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="json"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"university"</span>: <span class="cm-string">"tsinghua.edu.cn"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"research_area_xpath"</span>: <span class="cm-string">"//div[@class='intro']/p"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"email_regex"</span>: <span class="cm-string">"[\\w.-]+@[\\w.-]+\\.\\w+"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre></li><li><p><span>支持如下方式提取字段：</span></p><ul><li><p><span>XPath 优先提取主段落（如研究方向）；</span></p></li><li><p><span>CSS Selector 回退提取兼容格式；</span></p></li><li><p><span>正则表达式提取邮箱、电话等非结构化字段。</span></p></li></ul></li></ul><p><span>2.</span><strong><span>按站点路由模板匹配</span></strong></p><ul><li><p><span>按 URL 中学校域名自动加载模板配置；</span></p></li><li><p><span>每所高校维护一份字段匹配配置项（如 JSON 文件）。</span></p></li></ul></li><li><h4 id='可行性研究-4'><span>可行性研究</span></h4></li></ul><figure class='table-figure'><table><thead><tr><th><span>维度</span></th><th><span>内容说明</span></th></tr></thead><tbody><tr><td><strong><span>安全性</span></strong></td><td><span>将结构映射配置以 YAML/JSON 文件存储，规避硬编码、便于团队协作与审计。</span></td></tr><tr><td><strong><span>环境适配</span></strong></td><td><span>基于已有 Scrapy/XPath/CSS 解析能力，无需额外库支持，兼容性强。</span></td></tr><tr><td><strong><span>合规性</span></strong></td><td><span>含 </span><code>robots.txt</code><span> 检查与延时机制，不侵犯隐私字段；提取信息用于科研方向分析，未做商业用途传播。</span></td></tr><tr><td><strong><span>经济性</span></strong></td><td><span>一次构建多站点模板体系后，可复用于所有高校网页解析，后续只需维护新增高校或调整结构的小范围修改，维护成本极低。</span></td></tr></tbody></table></figure><p><span>通过</span><strong><span>配置模板</span></strong><span>能够有效应对不同网站结构的差异，具备较好的可行性、经济性和安全性。</span></p><p>&nbsp;</p>
<div class="alert-box">
  📌 <strong>问题2：</strong><br>
  部分高校数据存在失效、页面变化或爬虫受限情况
  <span style="color: #d00;">【待解决】</span>
</div><ul><li><h4 id='问题分析-5'><span>问题分析</span></h4><p><span>高校官网页面常出现以下问题：</span></p><ul><li><p><span>页面结构更新，字段位置改变，导致 XPath/CSS 无效；</span></p></li><li><p><span>页面重定向或 JavaScript 渲染，Scrapy 无法直接访问；</span></p></li><li><p><span>网站设置反爬机制，如验证码、UA/IP封锁；</span></p></li><li><p><span>教师链接批量失效（如模板页下线、链接年久失修）。</span></p></li></ul></li><li><h4 id='解决方案-5'><span>解决方案</span></h4></li></ul><ol start='' ><li><p><strong><span>容错与回退机制设计</span></strong></p><ul><li><p><span>增加响应状态码判断：若为 403/404/302 等错误码，自动记录日志并跳过；</span></p></li><li><p><span>设置通用兜底字段：如研究方向无匹配时记录 </span><code>&quot;Not Found&quot;</code><span>；</span></p></li></ul></li><li><p><strong><span>页面有效性检测与预处理策略</span></strong></p><ul><li><p><span>批量访问链接前，先发 HEAD 请求检查有效性与响应时间；</span></p></li><li><p><span>对站点支持 JavaScript 的，优先使用 Selenium 或 Splash 渲染模式进行补抓。</span></p></li></ul></li><li><p><strong><span>失效链接智能替换与模糊重试机制</span></strong></p><ul><li><p><span>对链接中 </span><code>.html</code><span> 页面失效时，尝试回退到上级目录并重新发现有效链接。</span></p></li></ul></li></ol><ul><li><h4 id='可行性研究-5'><span>可行性研究</span></h4></li></ul><figure class='table-figure'><table><thead><tr><th><span>维度</span></th><th><span>内容说明</span></th></tr></thead><tbody><tr><td><strong><span>安全性</span></strong></td><td><span>所有请求遵循 robots 协议；所有失败请求记录日志审计，无无限重试行为，防止封 IP。</span></td></tr><tr><td><strong><span>维护成本</span></strong></td><td><span>通用逻辑封装后复用性强，模板结构不变，失效页修复仅需新增入口页 URL。</span></td></tr></tbody></table></figure><p>&nbsp;</p><h3 id='知识技能学习情况-3'><span>知识技能学习情况</span></h3><p><strong><span>数据清洗与处理</span></strong></p><ul><li><p><span>使用正则表达式提取邮箱、电话号码等结构化字段；</span></p></li><li><p><span>对段落内容进行关键词筛选与内容判断，实现目标研究方向的识别；</span></p></li><li><p><span>根据数据字段特征优化清洗逻辑，提高字段提取准确率与覆盖率。</span></p></li></ul><p>&nbsp;</p><script>
    function showOverlay(id) {
        document.getElementById(id).style.display = 'flex';
    }
    function hideOverlay(id) {
    document.getElementById(id).style.display = 'none';
}
</script><!-- ----------------------------------------------------------------------- --><h2 id='总结反思与后期任务计划'><span>总结反思与后期任务计划</span></h2><h3 id='阶段实习总结'><span>阶段实习总结</span></h3><h4 id='工程协作与交流情况'><span>工程协作与交流情况</span></h4><p><span>在实习过程中，我与导师及部门工程师就实习目标、项目需求、技术实施方案以及遇到的问题进行沟通交流：</span></p><ul><li><p><span>在AIGC工具链搭建过程中，与AIGC设计师沟通Midjourney参数如何更贴合视觉风格需求，理解并使用Stable Diffusion进行风格化图像生成；</span></p></li><li><p><span>在竞对新品分析系统中，讨论主题包括Scrapy框架优化、大模型API调用、报告生成Prompt的技术细节等，确保最终生成报告的准确性与可读性；</span></p></li></ul><p><span>在交流、模仿和实践的过程中，我学习到很重要的一点是</span><strong><span>如何将复杂的技术问题进行拆解</span></strong><span>，这能够加深我对项目的理解；同时这些交流和协作也让我更理解通过团队合作寻求最佳解决方案的重要性。</span></p><h4 id='职业素养学习与提升'><span>职业素养学习与提升</span></h4><h5 id='团队协作'><span>团队协作</span></h5><p><span>通过与视觉设计、工程开发等多角色协作，能有效提升沟通与协调能力。具体来说，我提升了对多专业背景人员思维差异的理解力，学习了如何有效传递需求和反馈，确保项目顺利进行，也学会了用多元视角看待问题。</span></p><h5 id='服务意识'><span>服务意识</span></h5><p><span>无论是内部教程，还是外部报告，其本质都是为了满足特定用户的需求和痛点。</span></p><p><span>在内容设计时，我学会从“使用者视角”出发考虑交互与信息表达。比如在制作教程时，需要确保教程内容能够清晰、易懂地解决用户在使用过程中的问题，根据不同受众的理解能力和操作习惯，调整内容的深度与呈现方式，确保输出的每一份教程都能有效提升使用者的工作效率和技术能力。</span></p><h5 id='职业道德与规范'><span>职业道德与规范</span></h5><p><span>在项目实施过程中，遵循公司对数据隐的规定，确保数据处理的合法性。在AIGC生成内容的输出上，需要保证生成内容的合法性与道德性。此外，在在网页数据采集中，始终严格遵守robots协议，并避免采集个人隐私字段，确保项目合规推进。</span></p><h5 id='质量意识'><span>质量意识</span></h5><p><span>任何项目的开发都需要关注系统的代码复用性和稳定性，确保系统的高质量和低故障率。在模块开发中保持结构清晰、接口合理、数据一致性，是系统长期稳定运行的关键。</span></p><p>&nbsp;</p><h3 id='任务与目标进度'><span>任务与目标进度</span></h3><h4 id='前期任务完成度'><span>前期任务完成度</span></h4><p><span>根据原定实习计划，整体任务进度与预期基本一致，具体完成情况如下：</span></p><figure class='table-figure'><table><thead><tr><th><span>序号</span></th><th><span>工作内容</span></th><th><span>个人完成度</span></th><th><span>补充说明</span></th></tr></thead><tbody><tr><td><span>1</span></td><td><span>AIGC工具链搭建与教程建设</span></td><td><span>80%</span></td><td><span>视频资源已上线部署；图文教程和工作流有待进一步优化和部署。</span></td></tr><tr><td><span>2</span></td><td><span>竞对新品数据采集与报告生成</span></td><td><span>95%</span></td><td><span>目前数据采集与报告可以稳定产出，如有需要应优化报告的生成速度和样式，使其更符合企业需求。</span></td></tr><tr><td><span>3</span></td><td><span>风力发电科研资源爬取与筛选</span></td><td><span>100%</span></td><td><span>教师库构建初版已完成。</span></td></tr></tbody></table></figure><h4 id='后续实施计划'><span>后续实施计划</span></h4><p><span>结合当前任务进展，后续工作安排如下：</span></p><figure class='table-figure'><table><thead><tr><th><span>序号</span></th><th><span>后续任务或优化方向</span></th><th><span>目标与内容</span></th><th><span>预期起止时间</span></th></tr></thead><tbody><tr><td><span>1</span></td><td><span>Bluetti客服问答数据处理</span></td><td><span>清洗、合并数据，按产品型号输出结构化文件。</span></td><td><span>2025.05.26 - 2025.06.10</span></td></tr><tr><td><span>2</span></td><td><span>Bluetti外部客服问题解决</span></td><td><span>探索外部AI客服Zendesk平台API调用问题解决方案。</span></td><td><span>2025.06.11 - 2025.06.30</span></td></tr><tr><td><span>3</span></td><td><span>维护VLM工作流</span></td><td><span>排查并解决VLM工作流技术问题，解决效率低、资源占用高等问题。</span></td><td><span>2025.07.01 - 2025.07.15</span></td></tr><tr><td><span>4</span></td><td><span>VLM调优与生成精度提升</span></td><td><span>通过LoRA微调，优化AI生成的视觉效果。</span></td><td><span>2025.07.16 - 2025.08.15</span></td></tr></tbody></table></figure><p><span>注：根据实际任务进展，计划会根据团队需求做适当调整，确保高效推进每项任务。</span></p><script>
    function showOverlay(id) {
        document.getElementById(id).style.display = 'flex';
    }
    function hideOverlay(id) {
        document.getElementById(id).style.display = 'none';
    }
</script><p>&nbsp;</p><p>&nbsp;</p><p></div>
</body>
</html></p></div></div>
</body>
</html>
